{% extends "baseuser.html" %}
{% load static %}
{% block title %}рд╕рджрд╕реНрдпрддрд╛ рдЖрд╡реЗрджрди рдлрд╛рд░рдо{% endblock %}
{% block content %}

<div style="max-width: 700px; margin: 50px auto; background: #ffffff; padding: 40px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); font-family: 'Segoe UI', sans-serif; color: #2c3e50;">

    <h1 style="text-align:center; font-size:28px; font-weight:700; color:#2c3e50; margin-bottom:30px; letter-spacing:1px;">
        рд╕рджрд╕реНрдпрддрд╛ рдЖрд╡реЗрджрди рдлрд╛рд░рдо
    </h1>

    <!-- Bank details section -->
    <div style="background:#f8f9fa; padding:20px; border-radius:10px; margin-bottom:25px; border-left:5px solid #3498db;">
        <h2 style="color:#2980b9; font-size:20px; margin-bottom:15px;">ЁЯПж рдмреИрдВрдХ рдЦрд╛рддрд╛ рд╡рд┐рд╡рд░рдг</h2>
        <p><strong>рдмреИрдВрдХ рдирд╛рдо:</strong> рдорд╛рдЫрд╛рдкреБрдЪреНрдЫреНрд░реЗ рдмреИрдВрдХ</p>
        <p><strong>рдЦрд╛рддрд╛ рдирд╛рдо:</strong> рд╕реБрдЬрди рдХрд╛рд▓рд┐рдХреЛрдЯреЗ</p>
        <p><strong>рдЦрд╛рддрд╛ рдирдореНрдмрд░:</strong> 0630980051100010</p>
    </div>

    <!-- QR + Form wrapper -->
    <div style="margin-bottom:30px;">
        <div style="text-align:center; margin-bottom:20px;">
            <h2 style="color:#2980b9; font-size:20px; margin-bottom:15px;">ЁЯУ▒ QR рд╕реНрдХреНрдпрд╛рди рдЧрд░реЗрд░ рднреБрдХреНрддрд╛рдиреА рдЧрд░реНрдиреБрд╣реЛрд╕реН</h2>
            <img src="{% static 'images/qr.jpg' %}" alt="рдорд╛рдЫрд╛рдкреБрдЪреНрдЫреНрд░реЗ рдмреИрдВрдХ QR рдХреЛрдб" width="200" 
                 style="border-radius:10px; box-shadow:0 3px 10px rgba(0,0,0,0.15); margin-bottom:20px;">
        </div>

        <!-- Form -->
        <form action="#" method="post" enctype="multipart/form-data" 
              style="display:flex; flex-direction:column; gap:18px; text-align:left;">
            {% csrf_token %}

            <label for="first_name" style="font-weight:600;">рдкреБрд░рд╛ рдирд╛рдо:</label>
            <input type="text" id="first_name" name="first_name" required 
                   style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; transition:0.3s;"
                   onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">

            <label for="address" style="font-weight:600;">рдареЗрдЧрд╛рдирд╛:</label>
            <input type="text" id="address" name="address" required 
                   style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; transition:0.3s;"
                   onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">

            <label for="number" style="font-weight:600;">рд╕рдореНрдкрд░реНрдХ рдирдореНрдмрд░:</label>
            <input type="number" id="number" name="number" required 
                   style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; transition:0.3s;"
                   onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">

            <label for="amount" style="font-weight:600;">рджрд╛рди рд░рдХрдо:</label>
            <select id="amount" name="amount" onchange="toggleCustomAmount(this)" 
                    style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; cursor:pointer;"
                    onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">
                <option value="">рд░рдХрдо рдЫрд╛рдиреНрдиреБрд╣реЛрд╕реН</option>
                <option value="200">реирежреж</option>
                <option value="500">релрежреж</option>
                <option value="1000">резрежрежреж</option>
                <option value="2000">реирежрежреж</option>
                <option value="3000">рейрежрежреж</option>
                <option value="4000">рекрежрежреж</option>
                <option value="5000">релрежрежреж</option>
                <option value="6000">ремрежрежреж</option>
                <option value="custom">рдЕрдиреНрдп (рд╕реНрд╡рдпрдВ рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН)</option>
            </select>

            <input type="number" id="custom_amount" name="custom_amount" placeholder="рд░рдХрдо рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реН" 
                   style="display:none; padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; transition:0.3s;"
                   onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">

            <label for="currency" style="font-weight:600;">рдореБрджреНрд░рд╛:</label>
            <select id="currency" name="currency" 
                    style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; cursor:pointer;"
                    onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'">
                <option value="NPR">рдиреЗрд░реБ</option>
                <option value="USD">рдЕрдореЗрд░рд┐рдХреА рдбрд▓рд░</option>
            </select>

            <label for="donation_purpose" style="font-weight:600;">рджрд╛рдирдХреЛ рдЙрджреНрджреЗрд╢реНрдп:</label>
            <textarea id="donation_purpose" name="donation_purpose" rows="3" 
                      style="padding:12px; border:1px solid #ccc; border-radius:8px; font-size:15px; resize:vertical; transition:0.3s;"
                      onfocus="this.style.borderColor='#3498db'" onblur="this.style.borderColor='#ccc'"></textarea>

            <!-- Voucher Upload Section -->
            <div style="margin-top:15px; background:#f1f9ff; border:1px dashed #3498db; border-radius:10px; padding:20px; text-align:center;">
                <h3 style="color:#2980b9; font-size:18px; margin-bottom:12px;">ЁЯТ│ рдмреИрдВрдХ рднреМрдЪрд░ рд╕рдВрд▓рдЧреНрди рдЧрд░реНрдиреБрд╣реЛрд╕реН</h3>
                <label for="voucher_image" 
                       style="display:inline-block; background:linear-gradient(135deg,#3498db,#2980b9); color:#fff; padding:10px 18px; border-radius:6px; cursor:pointer; font-weight:600; transition:0.3s;">
                    рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН
                    <input type="file" id="voucher_image" name="voucher_image" accept="image/*" 
                           onchange="previewVoucherImage(event)" style="display:none;">
                </label>
                <div id="voucher_preview_container" style="margin-top:15px; display:none;">
                    <img id="voucher_preview" src="" alt="рднреМрдЪрд░ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди" 
                         style="max-width:200px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.2); border:2px solid #3498db;">
                </div>
            </div>

            <button type="submit" 
                    style="background:linear-gradient(135deg,#3498db,#2980b9); color:#fff; border:none; padding:14px; border-radius:8px; font-size:17px; font-weight:600; cursor:pointer; margin-top:15px; transition:0.3s;"
                    onmouseover="this.style.background='linear-gradient(135deg,#2980b9,#2471a3)'"
                    onmouseout="this.style.background='linear-gradient(135deg,#3498db,#2980b9)'">
                ЁЯТа рджрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН
            </button>
        </form>

        
    </div>
</div>

<script>
function toggleCustomAmount(select) {
    const customInput = document.getElementById('custom_amount');
    if (select.value === 'custom') {
        customInput.style.display = 'block';
        customInput.required = true;
    } else {
        customInput.style.display = 'none';
        customInput.required = false;
        customInput.value = '';
    }
}

function previewVoucherImage(event) {
    const file = event.target.files[0];
    const previewContainer = document.getElementById('voucher_preview_container');
    const previewImage = document.getElementById('voucher_preview');

    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            previewImage.src = e.target.result;
            previewContainer.style.display = 'block';
        };
        reader.readAsDataURL(file);
    } else {
        previewContainer.style.display = 'none';
    }
}
</script>

{% endblock %}
